<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!-- 다중 파일선택 시 선택한 모든
	이미지의 미리보기가 가능하도록 작성  -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	
	
	$("#upload").change(function(e){
		//미리보기 요소인 div#preview의내용물 삭제
		$("#preview").html("")
		var files = e.target.files // FileList객체
		console.log(e.target.files)
		
		for(var i = 0; i < files.length; i++){
			
			//이미지가 아닐 때
			if(!files[i].type.includes("image")){
				alert((i+1) + "번째 파일" + files[i].name + "은/는 이미지가 아니다")
				continue;
			}
			//---------------------------------------------------------------------
			//파일입력객체생성
			var reader = new FileReader()
			//파일 로드를 완료하면 동작하는 이벤트 리스너
			reader.onload = function(ev){
			console.log("----result----")
			console.log(ev.target.result)
			
 			$("#preview").append($("<img>").attr({
				"src": ev.target.result
				,"width":"400px"
				,"height":"300px"
			})) 
			
/* 			$("<img>").attr({
				"src": ev.target.result
				,"width":"400px"
				,"height":"300px"
			}).appendTo($("#preview")) */
			
			
			}
			reader.readAsDataURL(files[i])
		}// for files end
				
	})
})
</script>

<style>
#preview img{
		border: 1px solid black;
		margin: 5px;
	}
</style>



</head>
<body>

	<input type="file" id="upload" multiple="multiple" />
	<div id="preview"></div>

</body>
</html>